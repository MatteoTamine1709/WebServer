<html lang="en">

<!-- Mirrored from htmx.org/essays/hypermedia-apis-vs-data-apis/ by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 18 Aug 2023 17:45:24 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
  <title>&lt;/&gt; htmx ~ Hypermedia APIs vs. Data APIs</title>
    <link rel="canonical" href="index.html">
    
    <link rel="alternate" type="application/atom+xml" title="Sitewide Atom feed" href="../../atom.xml">
    <link rel="stylesheet" href="../../css/site.css">
    <script src="../../js/htmx.js"></script>
    <script src="../../js/class-tools.js"></script>
    <script src="../../js/preload.js"></script>
    <script src="../../js/_hyperscript.js"></script>
    <meta name="generator" content="Zola v.TODO">
</head>
<body hx-ext="class-tools, preload">

<div class="top-nav">
    <div class="c">
        <div class="menu">
            <div class="logo-wrapper">
                <a href="../../index.html" class="logo light">&lt;<b>/</b>&gt; htm<b>x</b></a>
                <svg _="on click toggle .show on #nav" class="hamburger" viewBox="0 0 100 80" width="25" height="25" style="margin-bottom:-5px">
                    <rect width="100" height="20" style="fill:rgb(52, 101, 164)" rx="10"></rect>
                    <rect y="30" width="100" height="20" style="fill:rgb(52, 101, 164)" rx="10"></rect>
                    <rect y="60" width="100" height="20" style="fill:rgb(52, 101, 164)" rx="10"></rect>
                </svg>
            </div>
            
            <div id="nav" class="navigation" hx-boost="true">
            
                <div class="navigation-items" preload="mouseover">
                    <div><a href="../../docs/index.html">docs</a></div>
                    <div><a href="../../reference/index.html">reference</a></div>
                    <div><a href="../../examples/index.html">examples</a></div>
                    <div><a href="../../talk/index.html">talk</a></div>
                    <div><a href="../index.html">essays</a></div>
                    <div hx-disable>
                        <form action="https://google.com/search">
                            <input type="hidden" name="q" value="site:htmx.org">
                            <label>
                                <span style="display:none;">Search</span>
                                <input type="text" name="q" placeholder="🔍️" class="search-box">
                            </label>
                        </form>
                    </div>
                </div>
                <div class="github-stars">
                    <iframe style="margin:auto;" src="https://ghbtns.com/github-btn.html?user=bigskysoftware&amp;repo=htmx&amp;type=star&amp;count=true" frameborder="0" scrolling="0" width="150" height="20" title="Star htmx on GitHub"></iframe>
                </div>
            </div>
        </div>
    </div>
</div>


    


<div class="c content ">
    

  <h1>Hypermedia APIs vs. Data APIs</h1>
  
    <address>Carson Gross</address>
    <time>July 17, 2021</time>
  

  <p>A <em>hypermedia</em> API is an API that returns <a rel="noopener" target="_blank" href="https://en.wikipedia.org/wiki/Hypermedia">hypermedia</a>, typically HTML over
HTTP.  This style of API is distinguished from data APIs that do not return a hypermedia.  The most familiar form of this
latter style of API today is the ubiquitous JSON API.</p>
<p>These two different types of API have distinctly different design needs and, therefore, should use different design 
constraints and adopt different goals when being created.</p>
<p>Hypermedia APIs:</p>
<ul>
<li>Will be trivially <a rel="noopener" target="_blank" href="https://en.wikipedia.org/wiki/Representational_state_transfer">REST-ful</a>, since they are simply what <a rel="noopener" target="_blank" href="https://www.ics.uci.edu/~fielding/pubs/dissertation/rest_arch_style.htm">Roy Fielding was describing</a>.</li>
<li>Should be driven by the needs of the underlying hypermedia application</li>
<li>May change dramatically <em>without</em> versioning information, because hypermedia utilizes <a rel="noopener" target="_blank" href="https://en.wikipedia.org/wiki/Representational_state_transfer#Uniform_interface">self describing messages</a> </li>
<li>Should be passed directly to humans, to maximize the flexibility of the system</li>
</ul>
<p>Data APIs, on the other hand:</p>
<ul>
<li>Will not benefit dramatically from REST-fulness, beyond perhaps <a rel="noopener" target="_blank" href="https://en.wikipedia.org/wiki/Richardson_Maturity_Model">Level 2 of the Richardson Maturity Model</a></li>
<li>Should strive for both regularity and expressivity due to the arbitrary data needs of consumers</li>
<li>Should be versioned and should be very stable within a particular version of the API</li>
<li>Should be consumed by code, processed and then potentially presented to a human</li>
</ul>
<h2 id="apis-today"><a class="zola-anchor" href="#apis-today" aria-label="Anchor link for: apis-today">🔗</a>APIs Today</h2>
<p>Today, APIs are typically thought of in terms of JSON-over-HTTP.  These are almost always data-oriented APIs rather
than hypermedia APIs, although occasionally hypermedia concepts are incorporated into them (typically to
little benefit of the end users.)  There has been a <a rel="noopener" target="_blank" href="https://graphql.org/">movement away</a> from REST-ful APIs as the industry has begun
to <a rel="noopener" target="_blank" href="https://kieranpotts.com/rebranding-rest/">recognize the problems with fitting data APIs into the REST-ful model.</a></p>
<p>This is a good thing: the industry should question REST-ful ideas in the Data API world and begin looking at older client-server
technologies that did a better job of servicing that particular network architecture, leaving REST instead to the network architecture
that it was coined to describe: hypermedia APIs.</p>
<h2 id="designing-a-hypermedia-api"><a class="zola-anchor" href="#designing-a-hypermedia-api" aria-label="Anchor link for: designing-a-hypermedia-api">🔗</a>Designing a Hypermedia API</h2>
<p>To show how a hypermedia API might be designed differently than a data API, let’s consider the following situation, 
which came up on the <a href="https://discord.gg/Z6gPqAd">htmx discord</a> recently:</p>
<blockquote>
<p>I want a page with a form and a table on it.  The form will add new elements to the table, and the table will also be
polling every 30 seconds so that updates from other users are shown.</p>
</blockquote>
<p>Let’s consider this UI in terms of a base url, <code>/contacts</code></p>
<p>The first thing we will need is an end point to retrieve the form and the table of current contacts.  This will
live at <code>/contacts</code>, giving:</p>
<pre data-lang="txt" style="background-color:#282c34;color:#abb2bf;" class="language-txt "><code class="language-txt" data-lang="txt"><span>  GET /contacts -&gt; render the form &amp; contacts table
</span></code></pre>
<p>Next, we want to be able to create contacts.  This would be done via a POST to the same URL:</p>
<pre data-lang="txt" style="background-color:#282c34;color:#abb2bf;" class="language-txt "><code class="language-txt" data-lang="txt"><span>  GET /contacts -&gt; render the form &amp; contacts table
</span><span>  POST /contacts -&gt; create the new contact, redirect to GET /contacts
</span></code></pre>
<p>with HTML that looks something like this:</p>
<pre data-lang="html" style="background-color:#282c34;color:#abb2bf;" class="language-html "><code class="language-html" data-lang="html"><span>&lt;</span><span style="color:#e06c75;">div</span><span>&gt;
</span><span>    &lt;</span><span style="color:#e06c75;">form </span><span style="color:#d19a66;">action</span><span>=</span><span style="color:#98c379;">&#39;/contacts&#39; </span><span style="color:#d19a66;">method</span><span>=</span><span style="color:#98c379;">&quot;post&quot;</span><span>&gt;
</span><span>      </span><span style="font-style:italic;color:#5c6370;">&lt;!-- form for adding contacts --&gt;
</span><span>    &lt;/</span><span style="color:#e06c75;">form</span><span>&gt;
</span><span>    &lt;</span><span style="color:#e06c75;">table</span><span>&gt;
</span><span>      </span><span style="font-style:italic;color:#5c6370;">&lt;!-- contacts table --&gt;
</span><span>    &lt;/</span><span style="color:#e06c75;">table</span><span>&gt;
</span><span>&lt;/</span><span style="color:#e06c75;">div</span><span>&gt;
</span></code></pre>
<p>So far, so standard web 1.0 application, and thus far the data-API and hypermedia API needs haven’t diverged very much,
although it is worth noteing that the hypermedia API is <em>self describing</em> and could be modified (say, changing the URL for creating
contacts) without breaking the hypermedia application.</p>
<p>Now we get to the part where htmx is needed: polling the server for updates to the table occasionally.  To do this
we will add a new end point, <code>/contacts/table</code>, which renders only the table of contacts:</p>
<pre data-lang="txt" style="background-color:#282c34;color:#abb2bf;" class="language-txt "><code class="language-txt" data-lang="txt"><span>  GET /contacts -&gt; render the form &amp; contacts table
</span><span>  POST /contacts -&gt; create the new contact, redirect to GET /contacts
</span><span>  GET /contacts/table -&gt; render the contacts table
</span></code></pre>
<p>and then add a poll trigger to the table:</p>
<pre data-lang="html" style="background-color:#282c34;color:#abb2bf;" class="language-html "><code class="language-html" data-lang="html"><span>&lt;</span><span style="color:#e06c75;">div</span><span>&gt;
</span><span>    &lt;</span><span style="color:#e06c75;">form </span><span style="color:#d19a66;">action</span><span>=</span><span style="color:#98c379;">&#39;/contacts&#39; </span><span style="color:#d19a66;">method</span><span>=</span><span style="color:#98c379;">&quot;post&quot;</span><span>&gt;
</span><span>      </span><span style="font-style:italic;color:#5c6370;">&lt;!-- form for adding contacts --&gt;
</span><span>    &lt;/</span><span style="color:#e06c75;">form</span><span>&gt;
</span><span>    &lt;</span><span style="color:#e06c75;">table </span><span style="color:#d19a66;">hx-trigger</span><span>=</span><span style="color:#98c379;">&quot;every 30s&quot; </span><span style="color:#d19a66;">hx-get</span><span>=</span><span style="color:#98c379;">&quot;/contacts/table&quot; </span><span style="color:#d19a66;">hx-swap</span><span>=</span><span style="color:#98c379;">&quot;outerHTML&quot;</span><span>&gt;
</span><span>      </span><span style="font-style:italic;color:#5c6370;">&lt;!-- contacts table --&gt;
</span><span>    &lt;/</span><span style="color:#e06c75;">table</span><span>&gt;
</span><span>&lt;/</span><span style="color:#e06c75;">div</span><span>&gt;
</span></code></pre>
<p>Here we see the hypermedia API and data API begin to diverge.  This new end point is driven entirely by hypermedia
needs, not data model needs.  This end point can go away if the hypermedia needs of the application change; its form may change 
dramatically and so on, which is entirely acceptable since the system is self-describing.</p>
<p>Since we have updated the HTML to use htmx for polling, we may as well make the form use htmx as well for a better
UX experience:</p>
<pre data-lang="html" style="background-color:#282c34;color:#abb2bf;" class="language-html "><code class="language-html" data-lang="html"><span>&lt;</span><span style="color:#e06c75;">div</span><span>&gt;
</span><span>    &lt;</span><span style="color:#e06c75;">form </span><span style="color:#d19a66;">action</span><span>=</span><span style="color:#98c379;">&#39;/contacts&#39; </span><span style="color:#d19a66;">method</span><span>=</span><span style="color:#98c379;">&quot;post&quot; </span><span style="color:#d19a66;">hx-boost</span><span>=</span><span style="color:#98c379;">&quot;true&quot;</span><span>&gt;
</span><span>      </span><span style="font-style:italic;color:#5c6370;">&lt;!-- form for adding contacts --&gt;
</span><span>    &lt;/</span><span style="color:#e06c75;">form</span><span>&gt;
</span><span>    &lt;</span><span style="color:#e06c75;">table </span><span style="color:#d19a66;">hx-trigger</span><span>=</span><span style="color:#98c379;">&quot;every 30s&quot; </span><span style="color:#d19a66;">hx-get</span><span>=</span><span style="color:#98c379;">&quot;/contacts/table&quot; </span><span style="color:#d19a66;">hx-swap</span><span>=</span><span style="color:#98c379;">&quot;outerHTML&quot;</span><span>&gt;
</span><span>      </span><span style="font-style:italic;color:#5c6370;">&lt;!-- contacts table --&gt;
</span><span>    &lt;/</span><span style="color:#e06c75;">table</span><span>&gt;
</span><span>&lt;/</span><span style="color:#e06c75;">div</span><span>&gt;
</span></code></pre>
<p>We can, if we choose, add additional end points for things like server-side validation of inputs, dynamic forms and 
so forth.  These end points would be driven by <em>hypermedia needs</em> rather than any sort of data model considerations:
we think in terms of what we are trying to achieve with our application.</p>
<h2 id="api-churn"><a class="zola-anchor" href="#api-churn" aria-label="Anchor link for: api-churn">🔗</a>API Churn</h2>
<p>The crux point of this short essay is this: API churn is fine in a hypermedia system because <em>the messages in a hypermedia system are self-describing</em>.
We can thrash the API around and the application doesn’t break: human users simply see the new hypermedia (HTML) and select what
actions they want to do.</p>
<p>Humans, compared with computers, are <a rel="noopener" target="_blank" href="https://intercoolerjs.org/2016/05/08/hatoeas-is-for-humans.html">good at deciding what to do</a>
and are reasonably OK with change.</p>
<p>This is in contrast with data APIs.  Data APIs cannot be modified without breaking client code and thus must be much
more disciplined in their changes.  Data APIs also face pressure to provide higher levels of expressiveness so that they
can satisfy more client needs without modification.</p>
<aside>
<p><em>This latter situation is <a rel="noopener" target="_blank" href="https://intercoolerjs.org/2016/02/17/api-churn-vs-security.html">especially dangerous</a> when these data APIs are consumed in a browser, because any data-api expressiveness available to a front-end developer is also available to a potentially hostile user, who can fire up a console and begin hammering away at the API.  Apparently, facebook uses a <a rel="noopener" target="_blank" href="https://twitter.com/AdamChainz/status/1392162996844212232">whitelist</a> to deal with this.</em></p>
<p><em>Do you?</em></p>
</aside>
<h2 id="conclusion"><a class="zola-anchor" href="#conclusion" aria-label="Anchor link for: conclusion">🔗</a>Conclusion</h2>
<p>When designing a hypermedia API, you should use a different design mindset than you use for data APIs.  Churn is
much less of a concern, and providing the end points you need for a good hypermedia experience should be your primary goal.</p>

  <div style="padding-top: 120px;padding-bottom:40px;text-align: center">
    &lt;/&gt;
  </div>
</div>

<footer>
    <div class="c content ">
        <div class="row">
            <div class="6 col footer-haiku">
                <h2>haiku</h2>
                <p><em>
                    javascript fatigue:<br>
                    longing for a hypertext<br>
                    already in hand
                </em></p>
            </div>
            <div class="6 col footer-menu">
                <div><a href="../../docs/index.html">docs</a></div>
                <div><a href="../../reference/index.html">reference</a></div>
                <div><a href="../../examples/index.html">examples</a></div>
                <div><a href="../../talk/index.html">talk</a></div>
                <div><a href="../index.html">essays</a></div>
                <div><a href="https://twitter.com/htmx_org">@htmx_org</a></div>
            </div>
        </div>
        <div class="row" style="text-align: center;">
            <div class="col">
                <img src="../../img/bss_bars.png" style="max-width: 30px; margin-top: 3em;">
            </div>
        </div>
    </div>
</footer>

</body>

<!-- Mirrored from htmx.org/essays/hypermedia-apis-vs-data-apis/ by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 18 Aug 2023 17:45:24 GMT -->
</html>
